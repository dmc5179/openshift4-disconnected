---
# Playbook to apply the Image Content Source Policies
# from all of the roles in this repo. Used for disconnected installs
- hosts: localhost
  gather_facts: true
  become: false
  tasks:

    - name: Apply any Image Content Source Policies from tools role
      include_role:
        name: tools
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from provision_aws role
      include_role:
        name: provision_aws
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from podman_registry role
      include_role:
        name: podman_registry
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from ocp_upgrade role
      include_role:
        name: ocp_upgrade
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from ocp_postinstall role
      include_role:
        name: ocp_postinstall
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from modify_ignition role
      include_role:
        name: modify_ignition
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from mirror_rpms role
      include_role:
        name: mirror_rpms
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from mirror_rhcos role
      include_role:
        name: mirror_rhcos
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from mirror_operatorhub_images role
      include_role:
        name: mirror_operatorhub_images
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from mirror_ocp_images role
      include_role:
        name: mirror_ocp_images
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from mirror_images role
      include_role:
        name: mirror_images
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_roles role
      include_role:
        name: install_roles
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_pxe role
      include_role:
        name: install_pxe
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from ntp role
      include_role:
        name: install_ntp
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_nfs role
      include_role:
        name: install_nfs
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_httpd role
      include_role:
        name: install_httpd
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_dhcp role
      include_role:
        name: install_dhcp
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from install_bind role
      include_role:
        name: install_bind
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from helm role
      include_role:
        name: helm
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from generate_ignition role
      include_role:
        name: generate_ignition
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from fetch_roles role
      include_role:
        name: fetch_roles
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from enable_signatures role
      include_role:
        name: enable_signatures
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from configure_repos role
      include_role:
        name: configure_repos
        apply:
          tags:
            - icsp

    - name: Apply any Image Content Source Policies from compliance-operator role
      include_role:
        name: compliance-operator
        apply:
          tags:
            - icsp
