---
- hosts: helper_node
  gather_facts: true
  become: false
  tasks:

    - name: Generate Ignition Files
      import_role:
        name: generate_ignition

    - name: Modify Ignition Files
      include_role:
        name: modify_ignition
      when:
        - (network_mode is match("static"))

    - name: Stage Ignition configs
      import_role:
        name: generate_ignition
        tasks_from: stage.yml
